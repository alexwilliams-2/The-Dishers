<div class="container">

  <h2><%= @business.first.name %></h2>
  <%= cl_image_tag @business.first.photo.key, height: 300%> <%# As the show method in business controller was changed to where(id: params[:id]) (AN ARRAY WAS CREATED), we have to use .first or .last to get this business out of the array %>
  <p> <strong> <%= pluralize @business.first.reviews.size, "Review" %> </strong></p>

  <% if @business.first.reviews.blank? %>
    <h3> Be the first to review <%= @business.first.name %> </h3>
    <ul class="list-group">
      <% else @business.first.reviews.each do |review| %>
      <li class="list-group-item"><%= "#{("⭐" * review.rating)}" %></li>
        <li class="list-group-item"><%= review.content %></li>
      <% end %>
    <% end %>
  </ul>

  <%= render :partial => "businesses/review" %>

  <%= button_to 'Add to Favorites', business_user_favourites_path(@business.first) %>
<%# <%= simple_form_for @favourite do |f| %>
<%#= f.input :business, as: :hidden, input_html: { value:  @business.first.id } %>
<%#= f.button :submit  %>
<%# end %>

</div>

<div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
